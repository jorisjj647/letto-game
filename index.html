
<!doctype html>
<html lang="fr">
<head>
  <head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>LETTO</title>
  
  <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-W8FTPHS6');</script>
<!-- End Google Tag Manager -->
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PR7VQD4HS7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PR7VQD4HS7');
</script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>LETTO ‚Äî The Letter Lotto | ALPHAZARD</title>

<style>
  /* ===== LETTO (6 lettres) : mobile-friendly ===== */
/* ‚úÖ Safe area iPhone + pas de d√©bordement */
html, body {
  width: 100%;
  overflow-x: hidden;
}

body{
  margin:0;
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  padding-bottom: env(safe-area-inset-bottom);
}

/* ‚úÖ Ligne des 6 lettres (toujours visible) */
.letters-row{
  width: min(420px, 100%);
  margin: 18px auto 0;
  padding: 0 12px;
  box-sizing: border-box;

  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 10px;
  justify-items: center;
}

/* ‚úÖ Case lettre responsive (s‚Äôadapte √† l‚ÄôiPhone) */
.letter{
  width: 100%;
  aspect-ratio: 1 / 1;      /* carr√© parfait */
  min-width: 40px;
  max-width: 64px;

  display:flex;
  align-items:center;
  justify-content:center;

  font-size: clamp(18px, 4.8vw, 28px);
  border-radius: 12px;
  box-sizing: border-box;
}

/* ‚úÖ Tr√®s petits √©crans (iPhone SE, etc.) */
@media (max-width: 360px){
  .letters-row{
    width: 100%;
    gap: 8px;
    padding: 0 10px;
  }
  .letter{
    max-width: 56px;
    border-radius: 10px;
  }
}

  margin:0;
  font-family:Arial;
  background:radial-gradient(circle,#1b1b2f,#0b0d12);
  color:white;
  text-align:center;
}

.wrap{max-width:950px;margin:auto;padding:20px}

h1{
  font-size:48px;
  color:gold;
  text-shadow:0 0 25px gold;
  margin-bottom:5px;
}

.sub{opacity:.85;margin-bottom:15px}

.top{
  display:flex;
  justify-content:center;
  gap:12px;
  flex-wrap:wrap;
  margin-bottom:15px;
}

.pill{
  background:#111;
  padding:10px 18px;
  border-radius:30px;
  border:1px solid gold;
  box-shadow:0 0 10px gold inset;
}

.grid{
  display:grid;
  grid-template-columns:repeat(6,72px);
  justify-content:center;
  gap:12px;
  margin:20px 0;
}

.slot{
  height:72px;
  line-height:72px;
  font-size:36px;
  font-weight:bold;
  background:#000;
  border:2px solid gold;
  border-radius:14px;
  box-shadow:0 0 12px gold inset;
}

.spin{animation:spin .1s linear infinite}

@keyframes spin{
  0%{transform:translateY(-5px)}
  50%{transform:translateY(5px)}
  100%{transform:translateY(-5px)}
}

.win{
  background:#1cff5c;
  color:black;
  box-shadow:0 0 25px #1cff5c;
}

.jackpot{
  animation:flash .5s infinite alternate;
}

@keyframes flash{
  from{box-shadow:0 0 25px gold}
  to{box-shadow:0 0 70px gold}
}

button{
  padding:16px 45px;
  font-size:24px;
  border-radius:12px;
  border:none;
  background:gold;
  color:black;
  font-weight:bold;
  cursor:pointer;
  box-shadow:0 0 25px gold;
}

#message{font-size:22px;margin-top:12px;min-height:28px}

.panel{
  margin-top:25px;
  background:#111;
  border:1px solid gold;
  border-radius:14px;
  padding:15px;
  text-align:left;
}

.panel h3{margin-top:0;color:gold}

.history{
  white-space:pre-line;
  font-family:monospace;
  font-size:14px;
}
</style>
<!-- PWA / App mobile -->
<meta name="theme-color" content="#000000" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="LETTO" />
<link rel="manifest" href="manifest.json" />
<link rel="apple-touch-icon" href="icon-192.png" />

<script>
  // Service Worker (offline + app-like)
  if ("serviceWorker" in navigator) {
    window.addEventListener("load", () => {
      navigator.serviceWorker.register("./sw.js").catch(() => {});
    });
  }
</script>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W8FTPHS6"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="wrap">

<h1>LETTO üé∞</h1>
<div class="sub">Ultra Casino Edition</div>

<div class="top">
  <div class="pill">Score : <span id="score">0</span></div>
  <div class="pill">Parties : <span id="plays">0</span></div>
  <div class="pill">Meilleur : <span id="best">0</span></div>
</div>

<div id="grid" class="grid">
  <div class="slot">?</div><div class="slot">?</div>
  <div class="slot">?</div><div class="slot">?</div>
  <div class="slot">?</div><div class="slot">?</div>
</div>

<button id="playBtn">PLAY / REPLAY</button>

<div id="message">Clique SPIN</div>

<div class="panel">
<h3>üìú R√àGLES LETTO</h3>
<ul>
<li>üíé 6 lettres identiques ‚Üí JACKPOT +500</li>
<li>üî• Palindrome ‚Üí +100</li>
<li>‚ö° Suite alphab√©tique (3+) ‚Üí +5</li>
<li>‚ú® Double lettre cons√©cutive ‚Üí +2</li>
<li>üéØ 3 voyelles / 3 consonnes ‚Üí +1</li>
<li>‚ùå Sinon ‚Üí 0</li>
</ul>
</div>

<div class="panel">
<h3>üìä Historique</h3>
<div id="history" class="history"></div>
</div>

</div>

<script>

const ALPHABET="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
const VOWELS=["A","E","I","O","U","Y"];

const slots=document.querySelectorAll(".slot");
const playBtn=document.getElementById("playBtn");
const message=document.getElementById("message");
const scoreEl=document.getElementById("score");
const playsEl=document.getElementById("plays");
const bestEl=document.getElementById("best");
const historyEl=document.getElementById("history");

let score=0,plays=0,best=0,history=[];

function rand(){return ALPHABET[Math.floor(Math.random()*26)]}

function palindrome(a){
  for(let i=0;i<3;i++) if(a[i]!==a[5-i]) return false;
  return true;
}

function straight(a){
  let r=1;
  for(let i=1;i<6;i++){
    if(ALPHABET.indexOf(a[i])===ALPHABET.indexOf(a[i-1])+1) r++;
    else r=1;
    if(r>=3) return true;
  }
  return false;
}

function double(a){
  for(let i=0;i<5;i++) if(a[i]===a[i+1]) return true;
  return false;
}

function balance(a){
  let v=0;
  for(const l of a) if(VOWELS.includes(l)) v++;
  return v===3;
}

function evaluate(a){
  if(a.every(l=>l===a[0])) return ["üíé JACKPOT !!!",500,true];
  if(palindrome(a)) return ["üî• Palindrome",100,false];
  if(straight(a)) return ["‚ö° Suite",5,false];
  if(double(a)) return ["‚ú® Double",2,false];
  if(balance(a)) return ["üéØ √âquilibre",1,false];
  return ["‚ùå Perdu",0,false];
}

function render(a,win,jackpot){
  slots.forEach((s,i)=>{
    s.textContent=a[i];
    s.classList.remove("spin");
    s.classList.toggle("win",win);
    s.classList.toggle("jackpot",jackpot);
  });
}

playBtn.onclick=function(){

  playBtn.disabled=true;

  slots.forEach(s=>{
    s.classList.remove("win","jackpot");
    s.classList.add("spin");
  });

  let spins=16;

  const anim=setInterval(()=>{
    slots.forEach(s=>s.textContent=rand());
    spins--;

    if(spins<=0){
      clearInterval(anim);

      const draw=[rand(),rand(),rand(),rand(),rand(),rand()];
      const [txt,gain,jp]=evaluate(draw);

      plays++; playsEl.textContent=plays;

      if(gain>0){
        score+=gain;
        if(score>best) best=score;
      }

      scoreEl.textContent=score;
      bestEl.textContent=best;

      render(draw,gain>0,jp);

      message.textContent=txt+"  +"+gain;

      history.unshift(draw.join("")+" ‚Üí "+txt+" +"+gain);
      history=history.slice(0,10);
      historyEl.textContent=history.join("\n");

      playBtn.disabled=false;
    }
  },80);
};

</script>
<div style="margin-top:30px;font-size:12px;opacity:0.7">
  ¬© ALPHAZARD ‚Äî All rights reserved
</div>
</body>
</html>
